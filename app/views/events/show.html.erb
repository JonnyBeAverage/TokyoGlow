<p><%= notice %></p>

<%= link_to "Back to events", events_path %>

<div class="d-flex flex-row justify-content-center">
  <div class="form-background col-8 border border-5 rounded-4 p-5">
    <div class="d-flex">
      <div class="col-8">
        <div class="icon-container">
          <h1 style="font-family: Allan; font-style: italic"><%= @event.title %></h1>
          <%= cl_image_tag @event.photo.key, height: 300, width: 400, crop: :fill %>
          <h3><%= @event.content %></h3>
          <h5><i class="fa-solid fa-location-dot"></i> <%= @event.location %></h5>
          <p><i class="fa-regular fa-clock"></i> <%= @event.date.strftime('%B %d') %> at <%= @event.time.strftime('%H:%M') %> JST</p>
          <p>Hosted by <%= @event.user.username %></p>
        </div>
      </div>
    </div>
  </div>

    <% if @event.user != current_user %>
      <div class="border border-2 p-4 rounded-4">
        <%# Render the shared/form here if needed %>
      </div>
    <% end %>

    <div class="d-flex">
      <% if @event.pending? %>
        <%= simple_form_for @event do |f| %>
          <%= f.input :status, as: :hidden, input_html: { value: 'accepted' } %>
          <%= f.submit 'Attending', class: 'btn btn-submit' %>
        <% end %>

        <%= simple_form_for @event do |f| %>
          <%= f.input :status, as: :hidden, input_html: { value: 'rejected' } %>
          <%= f.submit 'Not attending', class: 'btn btn-submit' %>
        <% end %>
      <% else %>
        <p><%= @event.status %></p>
      <% end %>
    </div>
  </div>
</div>

<% if policy(@event).destroy? %>
  <%= link_to "Delete this event", event_path(@event), class: "btn btn-submit btn-sm",
         data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
<% end %>
