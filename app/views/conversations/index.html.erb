<div class="container py-5 mb-5">
  
  <ul class="nav nav-pills nav-fill toogle-bar">
    <li class="nav-item">
      <%= link_to "Public", posts_path, class:"nav-link", style:"color:#8064A2;"  %>
    </li>
    <li class="nav-item">
      <%= link_to "Private", conversations_path, class:"nav-link active btn btn-primary", style:"background-color:;" %>
    </li>
  </ul>

  <% if @conversations.empty? %>
    <div class="container text-center my-5">
      <h1>Seem like you did not start any conversation yet</h1>
      <p>Time to make some connetction!</p>
    </div>
  <% else %>
    <div class="py-3 mb-5">
      <% @conversations.each do |conversation| %>
        <%= link_to conversation_path(conversation) do %>
          <div class= "d-flex gap-2">
            <div>
              <% if conversation.user_to.avatar_cl.attached? %>
                <%= cl_image_tag(post.user_to.avatar_cl.key, width: "50", height: "50", radius: "max", background: "white") %>
              <% elsif conversation.user_to.avatar %>
                <%= image_tag(conversation.user_to.avatar, width: "50", height: "50") %>
              <% else %>
                <%= image_tag("userF1.png", width: "50", height: "50") %>
              <% end %>
            </div>
            <div class ="mx-2">
              <small>
                <strong>
                  <% if current_user == conversation.user_to %>
                    <h3><%= conversation.user_from.username %></h3>
                  <% else %>
                    <h3><%= conversation.user_to.username %></h3>
                  <% end %>
                </strong>
                <% if conversation.messages.exists? %>
                  <p><i>Last message sent at: <%= conversation.messages.last.created_at.strftime("%a %b %e at %l:%M %p") %></i></p>
                <% end %>
              </small>
            </div>
          </div>
          <hr/>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>
